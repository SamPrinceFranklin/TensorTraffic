{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/firebase.ts"],"sourcesContent":["// Import the functions you need from the SDKs you need\nimport { initializeApp, getApps, getApp } from \"firebase/app\";\nimport { getFirestore } from \"firebase/firestore\";\n\n// A single configuration for Firebase services for the client\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n};\n\n// A server-specific configuration, ensuring we use the correct credentials on the server\nconst firebaseServerConfig = {\n    apiKey: process.env.FIREBASE_API_KEY,\n    authDomain: process.env.FIREBASE_AUTH_DOMAIN,\n    projectId: process.env.FIREBASE_PROJECT_ID,\n    storageBucket: process.env.FIREBASE_STORAGE_BUCKET,\n    messagingSenderId: process.env.FIREBASE_MESSAGING_SENDER_ID,\n    appId: process.env.FIREBASE_APP_ID,\n};\n\n// Initialize Firebase\nconst app = !getApps().length ? initializeApp(typeof window === 'undefined' ? firebaseServerConfig : firebaseConfig) : getApp();\nconst db = getFirestore(app);\n\nexport { db };\n"],"names":[],"mappings":"AAAA,uDAAuD;;;;AACvD;AAAA;AACA;AAAA;;;AAEA,8DAA8D;AAC9D,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;AACP;AAEA,yFAAyF;AACzF,MAAM,uBAAuB;IACzB,QAAQ,QAAQ,GAAG,CAAC,gBAAgB;IACpC,YAAY,QAAQ,GAAG,CAAC,oBAAoB;IAC5C,WAAW,QAAQ,GAAG,CAAC,mBAAmB;IAC1C,eAAe,QAAQ,GAAG,CAAC,uBAAuB;IAClD,mBAAmB,QAAQ,GAAG,CAAC,4BAA4B;IAC3D,OAAO,QAAQ,GAAG,CAAC,eAAe;AACtC;AAEA,sBAAsB;AACtB,MAAM,MAAM,CAAC,CAAA,GAAA,oLAAA,CAAA,UAAO,AAAD,IAAI,MAAM,GAAG,CAAA,GAAA,oLAAA,CAAA,gBAAa,AAAD,EAAE,uCAAgC,+DAAyC,CAAA,GAAA,oLAAA,CAAA,SAAM,AAAD;AAC5H,MAAM,KAAK,CAAA,GAAA,iKAAA,CAAA,eAAY,AAAD,EAAE","debugId":null}},
    {"offset": {"line": 149, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/incidents-service.ts"],"sourcesContent":["'use server';\n\nimport { db } from '@/lib/firebase';\nimport { collection, addDoc, getDocs, serverTimestamp, Timestamp, doc, updateDoc, increment, getDoc, query, orderBy } from \"firebase/firestore\";\nimport { Incident, Comment } from '@/lib/types';\n\nexport interface IncidentData {\n    location: {\n        latitude: number;\n        longitude: number;\n    };\n    category: string;\n    severity: string;\n    summary: string;\n    address?: string;\n}\n\nexport async function saveIncidentReport(incidentData: IncidentData) {\n    try {\n        const docRef = await addDoc(collection(db, \"incidents\"), {\n            location: incidentData.location,\n            category: incidentData.category,\n            severity: incidentData.severity,\n            summary: incidentData.summary,\n            address: incidentData.address || null,\n            upvotes: 0,\n            timestamp: serverTimestamp(),\n        });\n        console.log(\"Document written with ID: \", docRef.id);\n        return { success: true, id: docRef.id };\n    } catch (e) {\n        console.error(\"Error adding document: \", e);\n        if (e instanceof Error) {\n            if (e.message.includes('PERMISSION_DENIED')) {\n                 return { success: false, error: 'Permission Denied. Please check your Firestore security rules in the Firebase Console. This is a common issue and is required for the app to save data.' };\n            }\n            return { success: false, error: e.message };\n        }\n        return { success: false, error: 'An unknown error occurred while saving the incident report.' };\n    }\n}\n\nexport async function getIncidents() {\n  try {\n    const querySnapshot = await getDocs(collection(db, 'incidents'));\n    const incidents: Incident[] = querySnapshot.docs.map(doc => {\n      const data = doc.data();\n      const timestamp = data.timestamp as Timestamp;\n      \n      return {\n        id: doc.id,\n        location: {\n          latitude: data.location.latitude,\n          longitude: data.location.longitude,\n        },\n        category: data.category,\n        severity: data.severity,\n        summary: data.summary,\n        timestamp: timestamp.toDate().toISOString(),\n        address: data.address || undefined,\n        upvotes: data.upvotes || 0,\n      };\n    });\n    return { success: true, data: incidents };\n  } catch (e) {\n    console.error(\"Error getting documents: \", e);\n    if (e instanceof Error) {\n      if (e.message.includes('PERMISSION_DENIED')) {\n        return { success: false, error: 'Permission Denied. Could not retrieve incidents. Please check your Firestore security rules.' };\n      }\n      return { success: false, error: e.message };\n    }\n    return { success: false, error: 'An unknown error occurred while fetching incidents.' };\n  }\n}\n\nexport async function upvoteIncident(incidentId: string) {\n    try {\n        const incidentRef = doc(db, 'incidents', incidentId);\n        await updateDoc(incidentRef, {\n            upvotes: increment(1)\n        });\n        const updatedDoc = await getDoc(incidentRef);\n        if(updatedDoc.exists()){\n            return { success: true, newUpvotes: updatedDoc.data().upvotes };\n        }\n        return { success: false, error: 'Could not retrieve updated upvote count.' };\n    } catch (e: any) {\n        console.error(\"Error upvoting incident: \", e);\n        if (e.message.includes('PERMISSION_DENIED')) {\n            return { success: false, error: 'Permission Denied. Please check your Firestore security rules to allow incident updates.' };\n        }\n        return { success: false, error: e.message || 'An unknown error occurred while upvoting.' };\n    }\n}\n\nexport async function addComment(incidentId: string, commentText: string) {\n    try {\n        const commentsCollectionRef = collection(db, 'incidents', incidentId, 'comments');\n        const docRef = await addDoc(commentsCollectionRef, {\n            text: commentText,\n            author: 'Anonymous', // In a real app, this would be the logged-in user's ID/name\n            timestamp: serverTimestamp(),\n        });\n        return { success: true, id: docRef.id };\n    } catch (e: any) {\n        console.error(\"Error adding comment: \", e);\n         if (e.message.includes('PERMISSION_DENIED')) {\n            return { success: false, error: 'Permission Denied. Please check your Firestore security rules to allow writing to the comments sub-collection.' };\n        }\n        return { success: false, error: e.message || 'An unknown error occurred while adding the comment.' };\n    }\n}\n\nexport async function getComments(incidentId: string): Promise<{ success: boolean; data?: Comment[], error?: string }> {\n    try {\n        const commentsCollectionRef = collection(db, 'incidents', incidentId, 'comments');\n        const q = query(commentsCollectionRef, orderBy('timestamp', 'desc'));\n        const querySnapshot = await getDocs(q);\n        const comments: Comment[] = querySnapshot.docs.map(doc => {\n            const data = doc.data();\n            const timestamp = data.timestamp as Timestamp;\n            return {\n                id: doc.id,\n                text: data.text,\n                author: data.author,\n                timestamp: timestamp ? timestamp.toDate().toISOString() : new Date().toISOString(),\n            };\n        });\n        return { success: true, data: comments };\n    } catch (e: any) {\n        console.error(\"Error fetching comments: \", e);\n         if (e.message.includes('PERMISSION_DENIED')) {\n            return { success: false, error: 'Permission Denied. Please check your Firestore security rules to allow reading from the comments sub-collection.' };\n        }\n        return { success: false, error: e.message || 'An unknown error occurred while fetching comments.' };\n    }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 451, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/ai/genkit.ts"],"sourcesContent":["import {genkit} from 'genkit';\nimport {googleAI} from '@genkit-ai/googleai';\n\nexport const ai = genkit({\n  plugins: [googleAI()],\n  model: 'googleai/gemini-2.0-flash',\n});\n"],"names":[],"mappings":";;;AAAA;AAAA;AACA;AAAA;;;AAEO,MAAM,KAAK,CAAA,GAAA,uIAAA,CAAA,SAAM,AAAD,EAAE;IACvB,SAAS;QAAC,CAAA,GAAA,2KAAA,CAAA,WAAQ,AAAD;KAAI;IACrB,OAAO;AACT","debugId":null}},
    {"offset": {"line": 472, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/ai/flows/predictive-analysis-flow.ts"],"sourcesContent":["'use server';\n\n/**\n * @fileOverview A flow to analyze nearby incidents and predict consequences.\n *\n * - predictiveAnalysis - A function that handles the predictive analysis process.\n * - PredictiveAnalysisInput - The input type for the predictiveAnalysis function.\n * - PredictiveAnalysisOutput - The return type for the predictiveAnalysis function.\n */\n\nimport { ai } from '@/ai/genkit';\nimport { z } from 'genkit';\n\nconst IncidentSchema = z.object({\n  id: z.string(),\n  location: z.object({\n    latitude: z.number(),\n    longitude: z.number(),\n  }),\n  category: z.string(),\n  severity: z.string(),\n  summary: z.string(),\n  timestamp: z.string(),\n});\n\nconst PredictiveAnalysisInputSchema = z.object({\n  userLocation: z.object({\n    latitude: z.number(),\n    longitude: z.number(),\n  }),\n  incidents: z.array(IncidentSchema).describe('A list of incidents near the user.'),\n});\nexport type PredictiveAnalysisInput = z.infer<typeof PredictiveAnalysisInputSchema>;\n\nconst PredictiveAnalysisOutputSchema = z.object({\n  introduction: z.string().describe('A brief, one-sentence introduction to the situation.'),\n  immediateConsequences: z.array(z.string()).describe('A list of the most direct and immediate impacts of the incidents.'),\n  secondaryEffects: z.array(z.string()).describe('A list of likely knock-on effects, such as traffic on other roads.'),\n  safetyAdvice: z.array(z.string()).describe('A list of clear, actionable safety recommendations for the user.'),\n});\nexport type PredictiveAnalysisOutput = z.infer<typeof PredictiveAnalysisOutputSchema>;\n\n\nexport async function predictiveAnalysis(input: PredictiveAnalysisInput): Promise<PredictiveAnalysisOutput> {\n  return predictiveAnalysisFlow(input);\n}\n\nconst prompt = ai.definePrompt({\n  name: 'predictiveAnalysisPrompt',\n  input: { schema: PredictiveAnalysisInputSchema },\n  output: { schema: PredictiveAnalysisOutputSchema },\n  prompt: `You are an expert traffic and public safety analyst. Your job is to predict the consequences of various incidents in a user's vicinity.\n\n  **User's Current Location:**\n  Latitude: {{{userLocation.latitude}}}, Longitude: {{{userLocation.longitude}}}\n\n  **Nearby Incidents:**\n  {{#each incidents}}\n  - **Category:** {{category}}\n    - **Severity:** {{severity}}\n    - **Location:** Lat: {{location.latitude}}, Lng: {{location.longitude}}\n    - **Summary:** {{summary}}\n  {{/each}}\n  \n  **Analysis Task:**\n\n  Based on the user's location and the list of nearby incidents, provide a predictive analysis. Your analysis should be concise, actionable, and broken down into the following parts. Do not include markdown formatting like asterisks.\n\n  1.  **Introduction:** Provide a brief, one-sentence introduction summarizing the overall situation.\n  2.  **Immediate Consequences:** Create a list of the direct impacts of these incidents. (e.g., \"The accident on Main St. is causing a major roadblock.\")\n  3.  **Secondary Effects (Predictions):** Create a list of likely knock-on effects. Predict potential traffic jams on alternative routes, suggest areas to avoid, and identify any other hazards. (e.g., \"Traffic from the Main St. accident is likely to spill over to Oak Ave, expect heavy congestion there for the next hour.\", \"Due to the water logging on 1st Ave, the nearby subway entrance might also be flooded.\")\n  4.  **Safety Advice:** Create a list of clear, simple safety advice. (e.g., \"Avoid the downtown area if possible.\", \"If you must travel, allow for an extra 30 minutes and consider using public transport.\")\n\n  Provide the output in the structured format requested. Each point in the lists should be a complete sentence.`,\n});\n\nconst predictiveAnalysisFlow = ai.defineFlow(\n  {\n    name: 'predictiveAnalysisFlow',\n    inputSchema: PredictiveAnalysisInputSchema,\n    outputSchema: PredictiveAnalysisOutputSchema,\n  },\n  async (input) => {\n    const { output } = await prompt(input);\n    return output!;\n  }\n);\n"],"names":[],"mappings":";;;;;AAEA;;;;;;CAMC,GAED;AACA;AAAA;;;;;;AAEA,MAAM,iBAAiB,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC9B,IAAI,uIAAA,CAAA,IAAC,CAAC,MAAM;IACZ,UAAU,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACjB,UAAU,uIAAA,CAAA,IAAC,CAAC,MAAM;QAClB,WAAW,uIAAA,CAAA,IAAC,CAAC,MAAM;IACrB;IACA,UAAU,uIAAA,CAAA,IAAC,CAAC,MAAM;IAClB,UAAU,uIAAA,CAAA,IAAC,CAAC,MAAM;IAClB,SAAS,uIAAA,CAAA,IAAC,CAAC,MAAM;IACjB,WAAW,uIAAA,CAAA,IAAC,CAAC,MAAM;AACrB;AAEA,MAAM,gCAAgC,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC7C,cAAc,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACrB,UAAU,uIAAA,CAAA,IAAC,CAAC,MAAM;QAClB,WAAW,uIAAA,CAAA,IAAC,CAAC,MAAM;IACrB;IACA,WAAW,uIAAA,CAAA,IAAC,CAAC,KAAK,CAAC,gBAAgB,QAAQ,CAAC;AAC9C;AAGA,MAAM,iCAAiC,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC9C,cAAc,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IAClC,uBAAuB,uIAAA,CAAA,IAAC,CAAC,KAAK,CAAC,uIAAA,CAAA,IAAC,CAAC,MAAM,IAAI,QAAQ,CAAC;IACpD,kBAAkB,uIAAA,CAAA,IAAC,CAAC,KAAK,CAAC,uIAAA,CAAA,IAAC,CAAC,MAAM,IAAI,QAAQ,CAAC;IAC/C,cAAc,uIAAA,CAAA,IAAC,CAAC,KAAK,CAAC,uIAAA,CAAA,IAAC,CAAC,MAAM,IAAI,QAAQ,CAAC;AAC7C;AAIO,eAAe,mBAAmB,KAA8B;IACrE,OAAO,uBAAuB;AAChC;AAEA,MAAM,SAAS,mHAAA,CAAA,KAAE,CAAC,YAAY,CAAC;IAC7B,MAAM;IACN,OAAO;QAAE,QAAQ;IAA8B;IAC/C,QAAQ;QAAE,QAAQ;IAA+B;IACjD,QAAQ,CAAC;;;;;;;;;;;;;;;;;;;;;;+GAsBoG,CAAC;AAChH;AAEA,MAAM,yBAAyB,mHAAA,CAAA,KAAE,CAAC,UAAU,CAC1C;IACE,MAAM;IACN,aAAa;IACb,cAAc;AAChB,GACA,OAAO;IACL,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,OAAO;IAChC,OAAO;AACT;;;IA1CoB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 569, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/ai/flows/analyze-single-incident-impact-flow.ts"],"sourcesContent":["'use server';\n\n/**\n * @fileOverview A flow to analyze the potential impact of a single incident.\n *\n * - analyzeSingleIncidentImpact - A function that handles the single incident analysis process.\n * - AnalyzeSingleIncidentImpactInput - The input type for the analyzeSingleIncidentImpact function.\n * - AnalyzeSingleIncidentImpactOutput - The return type for the analyzeSingleIncidentImpact function.\n */\n\nimport { ai } from '@/ai/genkit';\nimport { z } from 'genkit';\nimport { Incident } from '@/lib/types';\n\nconst IncidentSchema = z.object({\n  id: z.string(),\n  location: z.object({\n    latitude: z.number(),\n    longitude: z.number(),\n  }),\n  category: z.string(),\n  severity: z.string(),\n  summary: z.string(),\n  timestamp: z.string(),\n});\n\nconst AnalyzeSingleIncidentImpactInputSchema = z.object({\n  userLocation: z.object({\n    latitude: z.number(),\n    longitude: z.number(),\n  }).describe(\"The user's current location.\"),\n  incident: IncidentSchema.describe('The specific incident to analyze.'),\n});\nexport type AnalyzeSingleIncidentImpactInput = z.infer<typeof AnalyzeSingleIncidentImpactInputSchema>;\n\nconst AnalyzeSingleIncidentImpactOutputSchema = z.object({\n  impactAnalysis: z.string().describe('A detailed analysis of the incident\\'s potential impact on nearby roads, traffic, and safety.'),\n});\nexport type AnalyzeSingleIncidentImpactOutput = z.infer<typeof AnalyzeSingleIncidentImpactOutputSchema>;\n\nexport async function analyzeSingleIncidentImpact(input: AnalyzeSingleIncidentImpactInput): Promise<AnalyzeSingleIncidentImpactOutput> {\n  return analyzeSingleIncidentImpactFlow(input);\n}\n\nconst prompt = ai.definePrompt({\n  name: 'analyzeSingleIncidentImpactPrompt',\n  input: { schema: AnalyzeSingleIncidentImpactInputSchema },\n  output: { schema: AnalyzeSingleIncidentImpactOutputSchema },\n  prompt: `You are a hyperlocal traffic and safety AI assistant. Your task is to provide a detailed impact analysis for a single, specific incident based on its type, severity, and location relative to the user.\n\n  **User's Current Location:**\n  Latitude: {{{userLocation.latitude}}}, Longitude: {{{userLocation.longitude}}}\n\n  **Incident to Analyze:**\n  - **Category:** {{incident.category}}\n  - **Severity:** {{incident.severity}}\n  - **Location:** Lat: {{incident.location.latitude}}, Lng: {{incident.location.longitude}}\n  - **Summary:** {{incident.summary}}\n  - **Time Reported:** {{incident.timestamp}}\n\n  **Analysis Task:**\n\n  Based *only* on the single incident provided, generate a concise impact analysis. Be specific and actionable. Address the following points:\n\n  1.  **Direct Road Impact:** What is the most likely immediate effect on the road where the incident occurred? (e.g., \"This accident will likely cause a full or partial blockage of the road it's on.\")\n  2.  **Nearby Street Effects:** How will this impact adjacent streets? Predict which nearby roads might see increased congestion as drivers try to find alternative routes.\n  3.  **Type-Specific Hazards:** What specific dangers are associated with this type of incident?\n      *   For 'Water Logging', mention risks of vehicle damage, stalled cars, or impassable roads.\n      *   For 'Accidents', mention the presence of emergency vehicles and debris.\n      *   For 'Electrical Issues', warn about potential traffic light outages at nearby intersections.\n      *   For 'Fallen Tree', mention road blockage and potential for residual debris.\n  4.  **Actionable Advice:** Give a clear, simple recommendation. (e.g., \"Avoid this immediate area. Use parallel routes two blocks to the north or south to bypass the congestion.\")\n\n  Your analysis should be direct and to the point. Do not give generic advice. Base your predictions on the incident's category and severity. A 'High' severity incident implies a much greater impact than a 'Low' one.\n  `,\n});\n\nconst analyzeSingleIncidentImpactFlow = ai.defineFlow(\n  {\n    name: 'analyzeSingleIncidentImpactFlow',\n    inputSchema: AnalyzeSingleIncidentImpactInputSchema,\n    outputSchema: AnalyzeSingleIncidentImpactOutputSchema,\n  },\n  async (input) => {\n    const { output } = await prompt(input);\n    return output!;\n  }\n);\n"],"names":[],"mappings":";;;;;AAEA;;;;;;CAMC,GAED;AACA;AAAA;;;;;;AAGA,MAAM,iBAAiB,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC9B,IAAI,uIAAA,CAAA,IAAC,CAAC,MAAM;IACZ,UAAU,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACjB,UAAU,uIAAA,CAAA,IAAC,CAAC,MAAM;QAClB,WAAW,uIAAA,CAAA,IAAC,CAAC,MAAM;IACrB;IACA,UAAU,uIAAA,CAAA,IAAC,CAAC,MAAM;IAClB,UAAU,uIAAA,CAAA,IAAC,CAAC,MAAM;IAClB,SAAS,uIAAA,CAAA,IAAC,CAAC,MAAM;IACjB,WAAW,uIAAA,CAAA,IAAC,CAAC,MAAM;AACrB;AAEA,MAAM,yCAAyC,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACtD,cAAc,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACrB,UAAU,uIAAA,CAAA,IAAC,CAAC,MAAM;QAClB,WAAW,uIAAA,CAAA,IAAC,CAAC,MAAM;IACrB,GAAG,QAAQ,CAAC;IACZ,UAAU,eAAe,QAAQ,CAAC;AACpC;AAGA,MAAM,0CAA0C,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACvD,gBAAgB,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;AACtC;AAGO,eAAe,4BAA4B,KAAuC;IACvF,OAAO,gCAAgC;AACzC;AAEA,MAAM,SAAS,mHAAA,CAAA,KAAE,CAAC,YAAY,CAAC;IAC7B,MAAM;IACN,OAAO;QAAE,QAAQ;IAAuC;IACxD,QAAQ;QAAE,QAAQ;IAAwC;IAC1D,QAAQ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;EA0BT,CAAC;AACH;AAEA,MAAM,kCAAkC,mHAAA,CAAA,KAAE,CAAC,UAAU,CACnD;IACE,MAAM;IACN,aAAa;IACb,cAAc;AAChB,GACA,OAAO;IACL,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,OAAO;IAChC,OAAO;AACT;;;IA9CoB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 667, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/.next-internal/server/app/predictive-alerts/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {getIncidents as '0036f4f9175b9166298ecf81f230471c932f9b8d35'} from 'ACTIONS_MODULE0'\nexport {predictiveAnalysis as '404094d1f402f57d4183b95e994be01e62ad220411'} from 'ACTIONS_MODULE1'\nexport {analyzeSingleIncidentImpact as '4062f7b07950f3c210dda940016877e842e1eb31fe'} from 'ACTIONS_MODULE2'\n"],"names":[],"mappings":";AAAA;AACA;AACA","debugId":null}},
    {"offset": {"line": 731, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/predictive-alerts/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/predictive-alerts/page.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/predictive-alerts/page.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAsS,GACnU,oEACA","debugId":null}},
    {"offset": {"line": 745, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/predictive-alerts/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/predictive-alerts/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/predictive-alerts/page.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAkR,GAC/S,gDACA","debugId":null}},
    {"offset": {"line": 759, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}}]
}