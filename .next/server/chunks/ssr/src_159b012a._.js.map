{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/custom-map-pin.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { LucideProps } from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\ninterface CustomMapPinProps {\n  icon: React.ElementType<LucideProps>;\n  className?: string;\n}\n\nexport function CustomMapPin({ icon: Icon, className }: CustomMapPinProps) {\n  return (\n    <div\n      className={cn(\n        'w-8 h-8 rounded-full bg-background border-2 border-foreground flex items-center justify-center shadow-md',\n        className\n      )}\n    >\n      <Icon className={cn('w-5 h-5 text-foreground', className)} />\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAIA;AAJA;;;AAWO,SAAS,aAAa,EAAE,MAAM,IAAI,EAAE,SAAS,EAAqB;IACvE,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,4GACA;kBAGF,cAAA,8OAAC;YAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,2BAA2B;;;;;;;;;;;AAGrD","debugId":null}},
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/incidents.ts"],"sourcesContent":["export interface Incident {\n  id: number;\n  lat: number;\n  lng: number;\n  category: 'Water Logging' | 'Accident' | 'PowerCut';\n  severity: 'Low' | 'Medium' | 'High';\n  description: string;\n  timestamp: Date;\n}\n\nexport const incidents: Incident[] = [\n  { id: 1, lat: 37.78, lng: -122.42, category: 'Water Logging', severity: 'Medium', description: 'Major intersection flooded, causing traffic delays.', timestamp: new Date('2024-07-20T10:30:00Z') },\n  { id: 2, lat: 37.77, lng: -122.41, category: 'Accident', severity: 'High', description: 'Two-car collision with injuries reported. Emergency services on scene.', timestamp: new Date('2024-07-21T14:00:00Z') },\n  { id: 3, lat: 37.76, lng: -122.43, category: 'Water Logging', severity: 'Low', description: 'Minor flooding on a residential street.', timestamp: new Date('2024-07-21T09:15:00Z') },\n  { id: 4, lat: 37.79, lng: -122.4, category: 'PowerCut', severity: 'High', description: 'Widespread power outage affecting several blocks.', timestamp: new Date('2024-07-21T18:45:00Z') },\n  { id: 5, lat: 37.75, lng: -122.45, category: 'Water Logging', severity: 'High', description: 'Underpass completely submerged. Road closed.', timestamp: new Date('2024-07-20T11:00:00Z') },\n  { id: 6, lat: 37.8, lng: -122.44, category: 'Accident', severity: 'Medium', description: 'Minor fender-bender, no injuries reported but causing traffic slowdown.', timestamp: new Date('2024-07-21T16:20:00Z') },\n  { id: 7, lat: 37.785, lng: -122.405, category: 'PowerCut', severity: 'Medium', description: 'Power flickering in the downtown area. Crews are investigating.', timestamp: new Date('2024-07-21T20:05:00Z') },\n  { id: 8, lat: 37.765, lng: -122.415, category: 'Accident', severity: 'Low', description: 'A cyclist and a pedestrian collided. Minor injuries.', timestamp: new Date('2024-07-21T13:10:00Z') },\n];\n"],"names":[],"mappings":";;;AAUO,MAAM,YAAwB;IACnC;QAAE,IAAI;QAAG,KAAK;QAAO,KAAK,CAAC;QAAQ,UAAU;QAAiB,UAAU;QAAU,aAAa;QAAuD,WAAW,IAAI,KAAK;IAAwB;IAClM;QAAE,IAAI;QAAG,KAAK;QAAO,KAAK,CAAC;QAAQ,UAAU;QAAY,UAAU;QAAQ,aAAa;QAA0E,WAAW,IAAI,KAAK;IAAwB;IAC9M;QAAE,IAAI;QAAG,KAAK;QAAO,KAAK,CAAC;QAAQ,UAAU;QAAiB,UAAU;QAAO,aAAa;QAA2C,WAAW,IAAI,KAAK;IAAwB;IACnL;QAAE,IAAI;QAAG,KAAK;QAAO,KAAK,CAAC;QAAO,UAAU;QAAY,UAAU;QAAQ,aAAa;QAAqD,WAAW,IAAI,KAAK;IAAwB;IACxL;QAAE,IAAI;QAAG,KAAK;QAAO,KAAK,CAAC;QAAQ,UAAU;QAAiB,UAAU;QAAQ,aAAa;QAAgD,WAAW,IAAI,KAAK;IAAwB;IACzL;QAAE,IAAI;QAAG,KAAK;QAAM,KAAK,CAAC;QAAQ,UAAU;QAAY,UAAU;QAAU,aAAa;QAA2E,WAAW,IAAI,KAAK;IAAwB;IAChN;QAAE,IAAI;QAAG,KAAK;QAAQ,KAAK,CAAC;QAAS,UAAU;QAAY,UAAU;QAAU,aAAa;QAAmE,WAAW,IAAI,KAAK;IAAwB;IAC3M;QAAE,IAAI;QAAG,KAAK;QAAQ,KAAK,CAAC;QAAS,UAAU;QAAY,UAAU;QAAO,aAAa;QAAwD,WAAW,IAAI,KAAK;IAAwB;CAC9L","debugId":null}},
    {"offset": {"line": 120, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/map.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { GoogleMap, useJsApiLoader, OverlayView } from '@react-google-maps/api';\nimport { CustomMapPin } from './custom-map-pin';\nimport { Droplets, Car, PowerOff } from 'lucide-react';\nimport { incidents as allIncidents } from '@/lib/incidents';\n\nconst defaultContainerStyle = {\n  width: '100%',\n  height: '100%',\n  borderRadius: '0.5rem',\n};\n\nconst defaultCenter = {\n  lat: 37.7749,\n  lng: -122.4194,\n};\n\nconst getPixelPositionOffset = (width: number, height: number) => ({\n  x: -(width / 2),\n  y: -(height / 2),\n});\n\nconst categoryStyles: { [key: string]: { icon: React.ElementType; className: string } } = {\n    'Water Logging': {\n        icon: Droplets,\n        className: 'bg-blue-100 border-blue-500 text-blue-500',\n    },\n    'Accident': {\n        icon: Car,\n        className: 'bg-red-100 border-red-500 text-red-500',\n    },\n    'PowerCut': {\n        icon: PowerOff,\n        className: 'bg-yellow-100 border-yellow-500 text-yellow-500',\n    },\n};\n\ninterface MapComponentProps {\n  showWaterLogging: boolean;\n  showAccidents: boolean;\n  showPowerCuts: boolean;\n  center?: { lat: number; lng: number };\n  zoom?: number;\n  containerStyle?: React.CSSProperties;\n}\n\nexport function MapComponent({ \n  showWaterLogging, \n  showAccidents, \n  showPowerCuts,\n  center = defaultCenter,\n  zoom = 12,\n  containerStyle = defaultContainerStyle\n}: MapComponentProps) {\n  const apiKey = process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY;\n\n  const { isLoaded, loadError } = useJsApiLoader({\n    id: 'google-map-script',\n    googleMapsApiKey: apiKey || '',\n  });\n\n  if (loadError) {\n    return (\n      <div className=\"flex items-center justify-center h-full bg-muted rounded-lg\">\n        <p className=\"text-destructive\">\n          Error loading maps.\n        </p>\n      </div>\n    );\n  }\n\n  if (!isLoaded) {\n    return (\n       <div className=\"flex items-center justify-center h-full bg-muted rounded-lg\">\n        <p>Loading Map...</p>\n      </div>\n    );\n  }\n\n  if (!apiKey) {\n    return (\n      <div className=\"flex items-center justify-center h-full bg-muted rounded-lg\">\n        <p className=\"text-destructive\">\n          Google Maps API key is missing. Please add it to your .env file.\n        </p>\n      </div>\n    );\n  }\n  \n  const incidentsToDisplay = allIncidents.filter(incident => {\n      if (showWaterLogging && incident.category === 'Water Logging') return true;\n      if (showAccidents && incident.category === 'Accident') return true;\n      if (showPowerCuts && incident.category === 'PowerCut') return true;\n      return false;\n  });\n\n  const incidents = zoom > 14 ? incidentsToDisplay.filter(i => i.lat === center.lat && i.lng === center.lng) : incidentsToDisplay;\n\n\n  return (\n    <GoogleMap mapContainerStyle={containerStyle} center={center} zoom={zoom}>\n      {incidents.map(incident => {\n          const style = categoryStyles[incident.category];\n          if (!style) return null;\n          return (\n            <OverlayView\n              key={incident.id}\n              position={{ lat: incident.lat, lng: incident.lng }}\n              mapPaneName={OverlayView.OVERLAY_MOUSE_TARGET}\n              getPixelPositionOffset={getPixelPositionOffset}\n            >\n              <CustomMapPin icon={style.icon} className={style.className} />\n            </OverlayView>\n          )\n      })}\n    </GoogleMap>\n  );\n}\n"],"names":[],"mappings":";;;;AAGA;AACA;AACA;AAAA;AAAA;AACA;AANA;;;;;;AAQA,MAAM,wBAAwB;IAC5B,OAAO;IACP,QAAQ;IACR,cAAc;AAChB;AAEA,MAAM,gBAAgB;IACpB,KAAK;IACL,KAAK,CAAC;AACR;AAEA,MAAM,yBAAyB,CAAC,OAAe,SAAmB,CAAC;QACjE,GAAG,CAAC,CAAC,QAAQ,CAAC;QACd,GAAG,CAAC,CAAC,SAAS,CAAC;IACjB,CAAC;AAED,MAAM,iBAAoF;IACtF,iBAAiB;QACb,MAAM,0MAAA,CAAA,WAAQ;QACd,WAAW;IACf;IACA,YAAY;QACR,MAAM,gMAAA,CAAA,MAAG;QACT,WAAW;IACf;IACA,YAAY;QACR,MAAM,8MAAA,CAAA,WAAQ;QACd,WAAW;IACf;AACJ;AAWO,SAAS,aAAa,EAC3B,gBAAgB,EAChB,aAAa,EACb,aAAa,EACb,SAAS,aAAa,EACtB,OAAO,EAAE,EACT,iBAAiB,qBAAqB,EACpB;IAClB,MAAM;IAEN,MAAM,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,CAAA,GAAA,+JAAA,CAAA,iBAAc,AAAD,EAAE;QAC7C,IAAI;QACJ,kBAAkB,UAAU;IAC9B;IAEA,IAAI,WAAW;QACb,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAE,WAAU;0BAAmB;;;;;;;;;;;IAKtC;IAEA,IAAI,CAAC,UAAU;QACb,qBACG,8OAAC;YAAI,WAAU;sBACd,cAAA,8OAAC;0BAAE;;;;;;;;;;;IAGT;IAEA,uCAAa;;IAQb;IAEA,MAAM,qBAAqB,uHAAA,CAAA,YAAY,CAAC,MAAM,CAAC,CAAA;QAC3C,IAAI,oBAAoB,SAAS,QAAQ,KAAK,iBAAiB,OAAO;QACtE,IAAI,iBAAiB,SAAS,QAAQ,KAAK,YAAY,OAAO;QAC9D,IAAI,iBAAiB,SAAS,QAAQ,KAAK,YAAY,OAAO;QAC9D,OAAO;IACX;IAEA,MAAM,YAAY,OAAO,KAAK,mBAAmB,MAAM,CAAC,CAAA,IAAK,EAAE,GAAG,KAAK,OAAO,GAAG,IAAI,EAAE,GAAG,KAAK,OAAO,GAAG,IAAI;IAG7G,qBACE,8OAAC,+JAAA,CAAA,YAAS;QAAC,mBAAmB;QAAgB,QAAQ;QAAQ,MAAM;kBACjE,UAAU,GAAG,CAAC,CAAA;YACX,MAAM,QAAQ,cAAc,CAAC,SAAS,QAAQ,CAAC;YAC/C,IAAI,CAAC,OAAO,OAAO;YACnB,qBACE,8OAAC,+JAAA,CAAA,cAAW;gBAEV,UAAU;oBAAE,KAAK,SAAS,GAAG;oBAAE,KAAK,SAAS,GAAG;gBAAC;gBACjD,aAAa,+JAAA,CAAA,cAAW,CAAC,oBAAoB;gBAC7C,wBAAwB;0BAExB,cAAA,8OAAC,0IAAA,CAAA,eAAY;oBAAC,MAAM,MAAM,IAAI;oBAAE,WAAW,MAAM,SAAS;;;;;;eALrD,SAAS,EAAE;;;;;QAQxB;;;;;;AAGN","debugId":null}},
    {"offset": {"line": 252, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG1B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 333, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB;AAGF,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAI3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iKAAA,CAAA,OAAmB;QAClB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iBAAiB;QAC9B,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG,iKAAA,CAAA,OAAmB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 365, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/switch.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,uBAAS,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,OAAqB;QACpB,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sXACA;QAED,GAAG,KAAK;QACT,KAAK;kBAEL,cAAA,8OAAC,kKAAA,CAAA,QAAsB;YACrB,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV;;;;;;;;;;;AAKR,OAAO,WAAW,GAAG,kKAAA,CAAA,OAAqB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 401, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/ai/flows/summarize-incidents-flow.ts"],"sourcesContent":["'use server';\n\n/**\n * @fileOverview A flow to summarize a list of incidents.\n *\n * - summarizeIncidents - A function that handles the incident summarization process.\n * - SummarizeIncidentsInput - The input type for the summarizeIncidents function.\n * - SummarizeIncidentsOutput - The return type for the summarizeIncidents function.\n */\n\nimport { ai } from '@/ai/genkit';\nimport { z } from 'genkit';\nimport { Incident } from '@/lib/incidents';\n\nconst IncidentSchema = z.object({\n  id: z.number(),\n  lat: z.number(),\n  lng: z.number(),\n  category: z.string(),\n});\n\nconst SummarizeIncidentsInputSchema = z.object({\n  incidents: z.array(IncidentSchema).describe('A list of incidents to summarize.'),\n});\nexport type SummarizeIncidentsInput = z.infer<typeof SummarizeIncidentsInputSchema>;\n\nconst SummarizeIncidentsOutputSchema = z.object({\n  summary: z.string().describe('A concise summary of the provided incidents.'),\n});\nexport type SummarizeIncidentsOutput = z.infer<typeof SummarizeIncidentsOutputSchema>;\n\nexport async function summarizeIncidents(input: SummarizeIncidentsInput): Promise<SummarizeIncidentsOutput> {\n  return summarizeIncidentsFlow(input);\n}\n\nconst prompt = ai.definePrompt({\n  name: 'summarizeIncidentsPrompt',\n  input: { schema: SummarizeIncidentsInputSchema },\n  output: { schema: SummarizeIncidentsOutputSchema },\n  prompt: `You are an AI assistant designed to summarize incident data.\n  \n  Based on the following list of incidents, provide a short, high-level summary.\n  Mention the total number of incidents and the number of incidents per category.\n  Do not list individual incidents.\n\n  Incidents:\n  {{#each incidents}}\n  - Category: {{category}} at Lat: {{lat}}, Lng: {{lng}}\n  {{/each}}\n  \n  {{ zodToJsonSchema output }}\n  `,\n});\n\nconst summarizeIncidentsFlow = ai.defineFlow(\n  {\n    name: 'summarizeIncidentsFlow',\n    inputSchema: SummarizeIncidentsInputSchema,\n    outputSchema: SummarizeIncidentsOutputSchema,\n  },\n  async (input) => {\n    const { output } = await prompt(input);\n    return output!;\n  }\n);\n"],"names":[],"mappings":";;;;;;IA+BsB,qBAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 414, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/map/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { MapComponent } from '@/components/map';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Label } from '@/components/ui/label';\nimport { Switch } from '@/components/ui/switch';\nimport { Droplets, Car, PowerOff, Sparkles, LoaderCircle } from 'lucide-react';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\nimport { summarizeIncidents } from '@/ai/flows/summarize-incidents-flow';\nimport { incidents as allIncidents } from '@/lib/incidents';\nimport { useToast } from '@/hooks/use-toast';\n\nexport default function MapPage() {\n  const [showWaterLogging, setShowWaterLogging] = useState(true);\n  const [showAccidents, setShowAccidents] = useState(false);\n  const [showPowerCuts, setShowPowerCuts] = useState(false);\n  const [summary, setSummary] = useState<string | null>(null);\n  const [isSummarizing, setIsSummarizing] = useState(false);\n  const { toast } = useToast();\n\n  const getFilteredIncidents = () => {\n    return allIncidents.filter(incident => {\n      if (showWaterLogging && incident.category === 'Water Logging') return true;\n      if (showAccidents && incident.category === 'Accident') return true;\n      if (showPowerCuts && incident.category === 'PowerCut') return true;\n      return false;\n    });\n  };\n\n  const handleSummarize = async () => {\n    const filteredIncidents = getFilteredIncidents();\n    if (filteredIncidents.length === 0) {\n      toast({\n        variant: 'destructive',\n        title: 'No Incidents Selected',\n        description: 'Please select at least one incident type to summarize.',\n      });\n      return;\n    }\n\n    setIsSummarizing(true);\n    setSummary(null);\n    try {\n      const result = await summarizeIncidents({ incidents: filteredIncidents.map(i => ({id: i.id, lat: i.lat, lng: i.lng, category: i.category})) });\n      setSummary(result.summary);\n    } catch (error) {\n      console.error('Summarization failed', error);\n      toast({\n        variant: 'destructive',\n        title: 'Summarization Failed',\n        description: 'Could not generate a summary. Please try again.',\n      });\n    } finally {\n      setIsSummarizing(false);\n    }\n  };\n\n\n  return (\n    <div className=\"bg-background min-h-screen\">\n      <main className=\"container mx-auto px-4 py-8 md:py-16\">\n        <header className=\"text-center mb-12\">\n          <h1 className=\"text-4xl sm:text-5xl font-bold font-headline text-primary\">Incidents Map</h1>\n          <p className=\"mt-4 text-lg text-muted-foreground\">Visualize reported incidents on the map.</p>\n          <div className=\"mt-6 max-w-2xl mx-auto\">\n            <div className=\"relative\">\n              <Input\n                type=\"text\"\n                placeholder=\"Ask AI to summarize visible incidents...\"\n                className=\"w-full h-12 pr-28\"\n                disabled\n              />\n              <Button \n                className=\"absolute right-2 top-1/2 -translate-y-1/2 h-9\"\n                onClick={handleSummarize}\n                disabled={isSummarizing}\n              >\n                {isSummarizing ? (\n                  <>\n                    <LoaderCircle className=\"mr-2 h-4 w-4 animate-spin\" />\n                    Summarizing...\n                  </>\n                ) : (\n                  <>\n                    <Sparkles className=\"mr-2 h-4 w-4\" />\n                    Get Summary\n                  </>\n                )}\n              </Button>\n            </div>\n          </div>\n        </header>\n        \n        {summary && (\n          <Card className=\"mb-8 shadow-lg animate-in fade-in-50\">\n            <CardHeader>\n              <CardTitle className=\"font-headline text-2xl flex items-center gap-2\">\n                <Sparkles className=\"w-6 h-6 text-primary\" />\n                AI Summary\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-muted-foreground leading-relaxed\">{summary}</p>\n            </CardContent>\n          </Card>\n        )}\n\n        <div className=\"relative h-[600px]\">\n          <MapComponent \n            showWaterLogging={showWaterLogging} \n            showAccidents={showAccidents}\n            showPowerCuts={showPowerCuts}\n          />\n          <Card className=\"absolute top-4 left-4 z-10 w-64 shadow-lg\">\n            <CardHeader>\n              <CardTitle className=\"text-lg\">Map Filters</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"flex items-center space-x-3\">\n                <Droplets className=\"w-5 h-5 text-primary\" />\n                <Label htmlFor=\"water-logging-switch\" className=\"flex-grow\">Show Water Logging</Label>\n                <Switch\n                  id=\"water-logging-switch\"\n                  checked={showWaterLogging}\n                  onCheckedChange={setShowWaterLogging}\n                />\n              </div>\n              <div className=\"flex items-center space-x-3\">\n                <Car className=\"w-5 h-5 text-primary\" />\n                <Label htmlFor=\"accidents-switch\" className=\"flex-grow\">Show Accidents</Label>\n                <Switch\n                  id=\"accidents-switch\"\n                  checked={showAccidents}\n                  onCheckedChange={setShowAccidents}\n                />\n              </div>\n              <div className=\"flex items-center space-x-3\">\n                <PowerOff className=\"w-5 h-5 text-primary\" />\n                <Label htmlFor=\"power-cuts-switch\" className=\"flex-grow\">Show Power Cuts</Label>\n                <Switch\n                  id=\"power-cuts-switch\"\n                  checked={showPowerCuts}\n                  onCheckedChange={setShowPowerCuts}\n                />\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}